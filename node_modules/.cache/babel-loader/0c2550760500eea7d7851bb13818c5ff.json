{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hyera/Documents/localhost/react-firebase/React-firebase-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hyera/Documents/localhost/react-firebase/React-firebase-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/hyera/Documents/localhost/react-firebase/React-firebase-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useHistory}from'react-router-dom';import'./login.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var authService=_ref.authService;var history=useHistory();var goToMaker=function goToMaker(userId){history.push({pathname:'/main',state:{id:userId}});};var onLogout=function onLogout(){authService.logout();};var onSocialLogin=function onSocialLogin(event){authService.state.login=true;console.log(authService.state.login);authService.socialLogin(event.currentTarget.name)//\n.then(function(data){return goToMaker(data.user.uid);});};//const onSocialClick = async (event) => {\n//\tconst name = event.currentTarget.name;\n//\tlet provider;\n//\tif (name === 'google') {\n//\t\tprovider = new firebaseInstance.auth.GoogleAuthProvider();\n//\t} else if (name === 'github') {\n//\t\tprovider = new firebaseInstance.auth.GithubAuthProvider();\n//\t}\n//\tawait authService.signInWithPopup(provider);\n//};\nuseEffect(function(){authService.onAuthChange(function(user){user&&goToMaker(user.uid);});});var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var onChange=function onChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;if(name==='email'){setEmail(value);}else if(name==='password'){setPassword(value);}};var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// prevent refresh\nevent.preventDefault();_context.prev=1;_context.next=4;return authService.createUserWithEmailAndPassword(email,password);case 4:_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](1);setError(_context.t0.message);case 9:case\"end\":return _context.stop();}}},_callee,null,[[1,6]]);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"section\",{class:\"login-wrap\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"login \",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-3 text-center h3 py-4\",children:\"Login\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"mb-3 text-center h5 mt-4\",children:\"SNS \\uACC4\\uC815\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"item\",children:/*#__PURE__*/_jsx(\"button\",{onClick:onSocialLogin,name:\"Google\",children:\"Google\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"item\",children:/*#__PURE__*/_jsx(\"button\",{onClick:onSocialLogin,name:\"Github\",children:\"Github\"})})]}),/*#__PURE__*/_jsx(\"h5\",{className:\"mb-3 text-center h5 mt-4\",children:\"\\uC77C\\uBC18 \\uACC4\\uC815\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,className:\"join-form\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",name:\"email\",type:\"text\",placeholder:\"Email\",required:true,value:email,onChange:onChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",name:\"password\",type:\"password\",placeholder:\"Password\",required:true,value:password,onChange:onChange})}),/*#__PURE__*/_jsx(\"div\",{class:\"text-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"button button-primary mt-2\",value:\"\\uD68C\\uC6D0\\uAC00\\uC785\"})}),error]})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"footer\",children:onLogout&&/*#__PURE__*/_jsx(\"button\",{className:\"button button-praimary ml-3\",onClick:onLogout,children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"})})]});};export default Login;","map":{"version":3,"sources":["/Users/hyera/Documents/localhost/react-firebase/React-firebase-test/src/pages/membership/login.js"],"names":["React","useEffect","useState","useHistory","Login","authService","history","goToMaker","userId","push","pathname","state","id","onLogout","logout","onSocialLogin","event","login","console","log","socialLogin","currentTarget","name","then","data","user","uid","onAuthChange","email","setEmail","password","setPassword","error","setError","onChange","target","value","onSubmit","preventDefault","createUserWithEmailAndPassword","message"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport './login.scss';\n\nconst Login = ({ authService }) => {\n\tconst history = useHistory();\n\n\tconst goToMaker = (userId) => {\n\t\thistory.push({\n\t\t\tpathname: '/main',\n\t\t\tstate: {\n\t\t\t\tid: userId,\n\t\t\t},\n\t\t});\n\t};\n\tconst onLogout = () => {\n\t\tauthService.logout();\n\t};\n\n\tconst onSocialLogin = (event) => {\n\t\tauthService.state.login = true;\n\n\t\tconsole.log(authService.state.login);\n\t\tauthService\n\t\t\t.socialLogin(event.currentTarget.name) //\n\t\t\t.then((data) => goToMaker(data.user.uid));\n\t};\n\n\t//const onSocialClick = async (event) => {\n\t//\tconst name = event.currentTarget.name;\n\t//\tlet provider;\n\t//\tif (name === 'google') {\n\t//\t\tprovider = new firebaseInstance.auth.GoogleAuthProvider();\n\t//\t} else if (name === 'github') {\n\t//\t\tprovider = new firebaseInstance.auth.GithubAuthProvider();\n\t//\t}\n\t//\tawait authService.signInWithPopup(provider);\n\t//};\n\n\tuseEffect(() => {\n\t\tauthService.onAuthChange((user) => {\n\t\t\tuser && goToMaker(user.uid);\n\t\t});\n\t});\n\n\tconst [email, setEmail] = useState('');\n\tconst [password, setPassword] = useState('');\n\tconst [error, setError] = useState('');\n\n\tconst onChange = (event) => {\n\t\tconst {\n\t\t\ttarget: { name, value },\n\t\t} = event;\n\n\t\tif (name === 'email') {\n\t\t\tsetEmail(value);\n\t\t} else if (name === 'password') {\n\t\t\tsetPassword(value);\n\t\t}\n\t};\n\n\tconst onSubmit = async (event) => {\n\t\t// prevent refresh\n\t\tevent.preventDefault();\n\t\ttry {\n\t\t\t//let data;\n\t\t\tawait authService.createUserWithEmailAndPassword(email, password);\n\t\t} catch (error) {\n\t\t\tsetError(error.message);\n\t\t}\n\t};\n\treturn (\n\t\t<section class=\"login-wrap\">\n\t\t\t<section className=\"login \">\n\t\t\t\t<h5 className=\"mb-3 text-center h3 py-4\">Login</h5>\n\n\t\t\t\t<h5 className=\"mb-3 text-center h5 mt-4\">SNS 계정</h5>\n\n\t\t\t\t<ul className=\"list\">\n\t\t\t\t\t<li className=\"item\">\n\t\t\t\t\t\t<button onClick={onSocialLogin} name=\"Google\">\n\t\t\t\t\t\t\tGoogle\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li className=\"item\">\n\t\t\t\t\t\t<button onClick={onSocialLogin} name=\"Github\">\n\t\t\t\t\t\t\tGithub\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\n\t\t\t\t<h5 className=\"mb-3 text-center h5 mt-4\">일반 계정</h5>\n\n\t\t\t\t<form onSubmit={onSubmit} className=\"join-form\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"form-input\"\n\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"form-input\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tclassName=\"button button-primary mt-2\"\n\t\t\t\t\t\t\tvalue=\"회원가입\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{error}\n\t\t\t\t</form>\n\t\t\t</section>\n\t\t\t<footer className=\"footer\">\n\t\t\t\t{onLogout && (\n\t\t\t\t\t<button className=\"button button-praimary ml-3\" onClick={onLogout}>\n\t\t\t\t\t\t로그아웃\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</footer>\n\t\t</section>\n\t);\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}